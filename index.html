<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Изучай португальский язык в игровой форме">
    <title>Portuguese Learning App</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        const vocabulary = [
            { q: 'Bom dia!', a: 'Доброе утро!' },
            { q: 'Boa tarde!', a: 'Добрый день!' },
            { q: 'Boa noite!', a: 'Добрый вечер!' },
            { q: 'Adeus/Até logo', a: 'До свидания' },
            { q: 'Boa noite, até amanhã?', a: 'Доброй ночи, до завтра?' },
            { q: 'Olá!', a: 'Привет!' },
            { q: 'Como está?/está?s?', a: 'Как поживаешь?' },
            { q: 'Como está??', a: 'Как дела?' },
            { q: 'Bem obrigado. E o sr. (a sra.)/tu?', a: 'Спасибо, хорошо. А Вы (ты)?' },
            { q: 'Desejo-lhe um bom dia!', a: 'Всего хорошего!' },
            { q: 'Bom fim-de-semana!', a: 'Приятного выходного!' },
            { q: 'Boa viagem de volta!', a: 'Счастливого пути домой!' },
            { q: 'Lamento, mas tenho de sair/me ir embora', a: 'К сожалению, мне надо идти' },
            { q: 'Adeus, até?/?e?/uma!', a: 'До свидания, до встречи!' },
            { q: 'Até breve!/amanhã?!', a: 'До скорого!/До завтра!' },
            { q: 'Ciao!', a: 'Пока!' },
            { q: 'Foi um prazer (?)-lo ((?)-la)/verte conhecido', a: 'Рад(а) был(а) познакомиться' },
            { q: 'Sim/N?o', a: 'Да/Нет' },
            { q: 'Obrigado', a: 'Спасибо (м)' },
            { q: 'Obrigada', a: 'Спасибо (ж)' },
            { q: 'N?o obrigado', a: 'Спасибо, не надо' },
            { q: 'N?o obrigada', a: 'Спасибо, не надо (ж)' },
            { q: 'Por favor', a: 'Пожалуйста' },
            { q: 'N?o compreete/não entendo', a: 'Я не понимаю' },
            { q: 'Fala inglês/franc?s/russo?', a: 'Вы говорите по-английски/по-французски/по-русски?' },
            { q: 'Eu n?o falo português', a: 'Я не говорю по-португальски' },
            { q: '(?)-lhe/(?e um(a) que fala russo/inglês?', a: 'Вы знаете кого-нибудь, кто говорит по-русски/по-английски?' },
            { q: 'Desculpe', a: 'Извините' },
            { q: 'Parece!', a: 'Я понял' },
            { q: 'Não percebeste/isso', a: 'Я не понял' },
            { q: 'Por favor, fale mais desvagar', a: 'Говорите, пожалуйста, помедленнее' },
            { q: 'Podia repetir isso, por favor?', a: 'Повторите, пожалуйста' },
            { q: 'Como se diz isso em português?', a: 'Как это называется по-португальски' },
            { q: 'O que signfica...?', a: 'Что значит ...?' },
            { q: 'N?o se importa de me escrever isso?', a: 'Пожалуйста, напишите это' },
            { q: 'Como está?/Como vai?', a: 'Как дела?' },
            { q: 'Se faz favor!/Com licen?a', a: 'Будьте любезны' },
            { q: 'Desculpe!', a: 'Извините!' },
            { q: 'Tenho muita pena!/Sinto muito', a: 'Сочувствую' },
            { q: 'Pode-me ajudar?', a: 'Вы можете мне помочь?' },
            { q: 'Pode-me dizer ...?', a: 'Скажите, пожалуйста ...' },
            { q: '(?)-me ... ?/Me dê ...?', a: 'Дайте мне ...' },
            { q: 'Queria ... (Gostaria ...', a: 'Я хотел(а) ...' },
            { q: '(?r... aqui?', a: 'Здесь можно ...?' },
            { q: 'Onde ? a casa de banho?', a: 'Где здесь туалет?' },
            { q: 'Onde posso arranjar ...?', a: 'Где я могу найти ...?' },
            { q: 'Que horas s?o?', a: 'Который час?' },
            { q: 'Tenho que me ir embora', a: 'Мне надо идти' },
            { q: 'Sa?de!', a: 'Ваше здоровье!' },
            { q: 'V?va!/Vai (óp3ss.), !)embora!', a: 'Ура! Давай!' },
            { q: 'Onde ? que fica a embaixada da R?ssia?', a: 'Где находится посольство России?' },
            { q: 'Como se chama?/te chamas?', a: 'Как Вас (тебя) зовут?' },
            { q: 'Chamo-me...', a: 'Меня зовут ...' },
            { q: 'Donde é?', a: 'Откуда Вы?' },
            { q: 'Eu sou da R?ssia', a: 'Я приехал(а) из России' },
            { q: 'Que idade tem/tens?', a: 'Сколько Вам (тебе) лет?' },
            { q: 'Tenho... anos', a: 'Мне ... лет' },
            { q: '(?)-?o casado (casada)?', a: 'Вы (ты) женат(ы) / замужем?' },
            { q: 'Tem/Tens filhos?', a: 'У Вас/тебя есть дети?' },
            { q: 'Que faz/O que é que faz hoje ? noite/amanhã?', a: 'Чем вы занимаетесь сегодня вечером/завтра?' },
            { q: 'Vamos comer/beber hoje ? noite?', a: 'Может быть, пойдем поедим/выпьем сегодня вечером?' },
            { q: 'Vamos comid?/?lo (comed?-la)/convida-te', a: 'Я хотел(а) бы пригласить Вас (тебя) на обед' },
            { q: 'Quer/Queres ir dansar?', a: 'Хотите потанцевать?' },
            { q: 'Quando/Onde nos encontramos?', a: 'Когда/Где мы встретимся?' },
            { q: 'Posso ir ter/buscar com?/contigo?', a: 'Я могу зайти за Вами (тобой)?' },
            { q: 'Posso ir buscar-(?o (busc?-la)/buscar-te ?s... horas', a: 'Я зайду за Вами (тобой) в ... часов' },
            { q: '(?)-levou-a/?eve-a)/levo-te ? casa', a: 'Я провожу Вас (тебя) домой' },
            { q: 'Ainda nos vemos a ver?', a: 'Мы ещё увидимся?' },
            { q: 'Muito gosto', a: 'Очень приятно' },
            { q: 'Est? bem', a: 'Всё в порядке' },
            { q: 'Anda c/?/O sei', a: 'Хорошо' },
            { q: 'Talvez', a: 'Может быть' },
            { q: 'Espero, mas n?o posso', a: 'Я надеюсь, (но) не могу' },
            { q: 'Est?/Est?s aqui sozinho?', a: 'Вы пришли один(одна)?' },
            { q: 'Posso-me sentar ao p?? de si/ti?', a: 'Можно сесть рядом с Вами (тобой)?' },
            { q: 'Estou ? espera de uma pessoa', a: 'Я жду одного (одну) человека' },
            { q: 'Tens um namorado/uma namorada?', a: 'У тебя есть друг/подруга?' },
            { q: 'Tu ?s muito bonita', a: 'Ты очень красивая' },
            { q: 'Tens cabelo/ólhos muito bonitos', a: 'У тебя очень красивые волосы/глаза' },
            { q: 'Agradas-me imenso', a: 'Ты мне очень нравишься' },
            { q: 'Eu gosto de ti', a: 'Ты мне нравишься' },
            { q: 'Amo-te', a: 'Я люблю тебя' },
            { q: 'Fico muito contente de estar contigo', a: 'Я очень рад(а) быть с тобой' },
            { q: 'Vens comigo a minha casa?', a: 'Пойдём ко мне домой?' },
            { q: 'Deixe-me em paz!', a: 'Оставьте меня в покое!' },
            { q: 'Desapare?e!', a: 'Исчезни!' },
            { q: 'Muito bem!', a: 'Очень хорошо!' },
            { q: 'Estou muito satisfeito (satisfeita)!', a: 'Я очень доволен (довольна)!' },
            { q: 'Maravilhoso!', a: 'Замечательно!' },
            { q: 'Com muito gosto', a: 'С удовольствием' },
            { q: 'Tenho me faz', a: 'Мне всё равно' },
            { q: 'Que pena!', a: 'Как жаль!' },
            { q: 'Eu gostava mais de...', a: 'Я предпочёл(ла) бы ...' },
            { q: 'Isto n?o me agrada', a: 'Мне это не нравится' },
            { q: 'Isto é muito exorrecido', a: 'Это очень скучно' },
            { q: 'De maneira nenhuma', a: 'Ни в коем случае' },
            { q: 'Muito obrigado (obrigada)', a: 'Большое спасибо' },
            { q: 'Posso?', a: 'Можно?' },
            { q: 'Por favor...', a: 'Пожалуйста' },
            { q: 'Obrigada (Obrigado), com muito gosto', a: 'Спасибо, с удовольствием' },
            { q: 'N?o, obrigado (obrigada)', a: 'Спасибо, не надо' },
            { q: 'Com muita pena, mas...', a: 'К сожалению, но ...' },
            { q: 'Muito obrigado (obrigada), ?-umamhã/sei da sua parte', a: 'Большое спасибо, передавайте привет Вашим близким' },
            { q: 'Muito obrigado (obrigado) pelo or-m?de/pela ajuda', a: 'Большое спасибо за приглашение/помощь' },
            { q: 'Com muito prazer', a: 'Пожалуйста (не за что)' },
            { q: 'Desculpe!', a: 'Извините!' },
            { q: 'N?o tem de qu?!', a: 'He стоит благодарности!' },
            { q: 'N?o faz mal!', a: 'Ничего страшного!' },
            { q: 'Parab?ns!/desejo-lhe/te-desagra/Paível', a: 'Поздравляю!' },
            { q: 'Que tempo bonito/mau que est? hoje!', a: 'Какая сегодня хорошая/плохая погода!' },
            { q: 'Est? muito calor/frio (aqui)', a: 'Очень жарко (холодно) (здесь)' },
            { q: 'O qu? diz a previs?o meteorol?gica?', a: 'Какой прогноз погоды?' }
        ];

        let gameState = 'menu';
        let currentQuestion = null;
        let options = [];
        let selectedAnswer = null;
        let correctAnswer = null;
        let score = { correct: 0, total: 0 };
        let usedIndices = [];

        function render() {
            const app = document.getElementById('app');
            
            if (gameState === 'menu') {
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
                            <div class="text-center mb-8">
                                <h1 class="text-5xl font-bold text-gray-800 mb-3">Português</h1>
                                <p class="text-xl text-gray-600">Изучай португальский играя!</p>
                            </div>
                            <div class="mb-6 p-5 bg-gradient-to-r from-green-100 to-blue-100 rounded-xl text-center">
                                <p class="text-green-700 font-bold text-lg mb-2">📚 Словарь: ${vocabulary.length} слов</p>
                            </div>
                            <button onclick="startGame()" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-5 px-6 rounded-2xl font-bold text-2xl hover:from-green-600 hover:to-blue-700 transition-all transform hover:scale-105 shadow-lg">
                                ▶ Play
                            </button>
                        </div>
                    </div>
                `;
            } else if (gameState === 'playing') {
                const percentage = score.total === 0 ? 0 : Math.round((score.correct / score.total) * 100);
                const showNext = selectedAnswer !== null;
                
                let optionsHTML = options.map((option, index) => {
                    const isSelected = selectedAnswer === option;
                    const isCorrect = option === correctAnswer;
                    const showResult = selectedAnswer !== null;
                    
                    let buttonClass = 'w-full p-5 rounded-xl font-semibold text-lg transition-all border-2 ';
                    if (showResult) {
                        if (isCorrect) {
                            buttonClass += 'bg-green-500 text-white border-green-600';
                        } else if (isSelected && !isCorrect) {
                            buttonClass += 'bg-red-500 text-white border-red-600';
                        } else {
                            buttonClass += 'bg-gray-200 text-gray-500 border-gray-300';
                        }
                    } else {
                        buttonClass += 'bg-white text-gray-800 border-gray-300 hover:border-blue-500 hover:bg-blue-50';
                    }
                    
                    return `<button onclick="selectAnswer('${option.replace(/'/g, "\\'")}')" ${showResult ? 'disabled' : ''} class="${buttonClass}">${option}</button>`;
                }).join('');
                
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 p-4">
                        <div class="max-w-3xl mx-auto">
                            <div class="bg-white/95 backdrop-blur rounded-2xl shadow-xl p-4 mb-6">
                                <div class="flex items-center justify-between flex-wrap gap-3">
                                    <div class="flex items-center gap-4">
                                        <div class="text-2xl font-bold text-gray-800">${score.correct}/${score.total}</div>
                                        <div class="text-xl font-semibold text-blue-600">${percentage}%</div>
                                        <div class="text-sm text-gray-500">Вопрос ${usedIndices.length} из ${vocabulary.length}</div>
                                    </div>
                                    <div class="flex gap-2">
                                        ${showNext ? '<button onclick="nextQuestion()" class="px-5 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-md">Next →</button>' : ''}
                                        <button onclick="finishGame()" class="px-5 py-2.5 bg-yellow-500 text-white rounded-xl font-semibold hover:bg-yellow-600 transition-all shadow-md">Finish</button>
                                        <button onclick="exitGame()" class="px-5 py-2.5 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-all shadow-md">✕ Exit</button>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white rounded-3xl shadow-2xl p-8">
                                <div class="mb-8 p-8 bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl">
                                    <h2 class="text-4xl font-bold text-gray-800 text-center break-words">${currentQuestion}</h2>
                                </div>
                                <div class="grid grid-cols-1 gap-4 mb-6">
                                    ${optionsHTML}
                                </div>
                                ${selectedAnswer ? `
                                    <div class="text-center">
                                        <div class="p-6 ${selectedAnswer === correctAnswer ? 'bg-green-100 border-green-500' : 'bg-red-100 border-red-500'} rounded-2xl border-2">
                                            <p class="text-4xl font-bold ${selectedAnswer === correctAnswer ? 'text-green-700' : 'text-red-700'}">
                                                ${selectedAnswer === correctAnswer ? 'Yes! ✓' : 'No! ✗'}
                                            </p>
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            } else if (gameState === 'finished') {
                const percentage = score.total === 0 ? 0 : Math.round((score.correct / score.total) * 100);
                let motivation = '';
                if (percentage >= 80) motivation = '<p class="text-3xl text-green-600 font-bold mb-8">Отлично! 🎉</p>';
                else if (percentage >= 50) motivation = '<p class="text-3xl text-blue-600 font-bold mb-8">Хорошо! 👍</p>';
                else motivation = '<p class="text-3xl text-orange-600 font-bold mb-8">Продолжай практиковаться! 💪</p>';
                
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full">
                            <div class="text-center mb-8">
                                <h1 class="text-5xl font-bold text-gray-800 mb-6">🎉 Игра окончена!</h1>
                                <div class="mb-8 p-8 bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl">
                                    <p class="text-7xl font-bold text-gray-800 mb-3">${percentage}%</p>
                                    <p class="text-3xl text-gray-700 font-semibold">${score.correct} из ${score.total}</p>
                                </div>
                                ${motivation}
                            </div>
                            <div class="flex gap-4">
                                <button onclick="startGame()" class="flex-1 bg-gradient-to-r from-green-500 to-blue-600 text-white py-5 px-6 rounded-xl font-bold text-lg hover:from-green-600 hover:to-blue-700 transition-all shadow-lg">
                                    Играть снова
                                </button>
                                <button onclick="exitGame()" class="flex-1 bg-gray-500 text-white py-5 px-6 rounded-xl font-bold text-lg hover:bg-gray-600 transition-all shadow-lg">
                                    В меню
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function startGame() {
            gameState = 'playing';
            score = { correct: 0, total: 0 };
            usedIndices = [];
            generateQuestion();
        }

        function generateQuestion() {
            if (usedIndices.length >= vocabulary.length) {
                finishGame();
                return;
            }

            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * vocabulary.length);
            } while (usedIndices.includes(randomIndex));

            const question = vocabulary[randomIndex];
            correctAnswer = question.a;
            currentQuestion = question.q;

            const wrongAnswers = [];
            while (wrongAnswers.length < 3) {
                const randomWrongIndex = Math.floor(Math.random() * vocabulary.length);
                const wrongAns = vocabulary[randomWrongIndex].a;
                if (wrongAns !== correctAnswer && !wrongAnswers.includes(wrongAns)) {
                    wrongAnswers.push(wrongAns);
                }
            }

            options = [...wrongAnswers, correctAnswer].sort(() => Math.random() - 0.5);
            selectedAnswer = null;
            usedIndices.push(randomIndex);
            render();
        }

        function selectAnswer(answer) {
            if (selectedAnswer !== null) return;
            selectedAnswer = answer;
            const isCorrect = answer === correctAnswer;
            score.correct += isCorrect ? 1 : 0;
            score.total += 1;
            render();
        }

        function nextQuestion() {
            generateQuestion();
        }

        function finishGame() {
            gameState = 'finished';
            render();
        }

        function exitGame() {
            gameState = 'menu';
            score = { correct: 0, total: 0 };
            usedIndices = [];
            render();
        }

        render();
    </script>
</body>
</html>