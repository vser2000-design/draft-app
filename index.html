<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="–ò–∑—É—á–∞–π –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π —è–∑—ã–∫ –≤ –∏–≥—Ä–æ–≤–æ–π —Ñ–æ—Ä–º–µ">
    <meta name="theme-color" content="#6366F1">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Portugu√™s">
    
    <title>Portuguese Learning - –ò–∑—É—á–∞–π –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π</title>
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="/draft-app/manifest.json">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" sizes="192x192" href="/draft-app/icon-192.png">
    <link rel="apple-touch-icon" href="/draft-app/icon-192.png">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        * {
            -webkit-tap-highlight-color: transparent;
        }
    </style>
</head>
<body>
    <div id="app"></div>

    <script>
        // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/draft-app/sw.js')
                    .then(reg => console.log('Service Worker –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω'))
                    .catch(err => console.log('–û—à–∏–±–∫–∞ Service Worker:', err));
            });
        }

        const vocabulary = [
            { q: 'Bom dia!', a: '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ!' },
            { q: 'Boa tarde!', a: '–î–æ–±—Ä—ã–π –¥–µ–Ω—å!' },
            { q: 'Boa noite!', a: '–î–æ–±—Ä—ã–π –≤–µ—á–µ—Ä!' },
            { q: 'Adeus/At√© logo', a: '–î–æ —Å–≤–∏–¥–∞–Ω–∏—è' },
            { q: 'Boa noite, at√© amanh√£?', a: '–î–æ–±—Ä–æ–π –Ω–æ—á–∏, –¥–æ –∑–∞–≤—Ç—Ä–∞?' },
            { q: 'Ol√°!', a: '–ü—Ä–∏–≤–µ—Ç!' },
            { q: 'Como est√°?/est√°?s?', a: '–ö–∞–∫ –ø–æ–∂–∏–≤–∞–µ—à—å?' },
            { q: 'Como est√°??', a: '–ö–∞–∫ –¥–µ–ª–∞?' },
            { q: 'Bem obrigado. E o sr. (a sra.)/tu?', a: '–°–ø–∞—Å–∏–±–æ, —Ö–æ—Ä–æ—à–æ. –ê –í—ã (—Ç—ã)?' },
            { q: 'Desejo-lhe um bom dia!', a: '–í—Å–µ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ!' },
            { q: 'Bom fim-de-semana!', a: '–ü—Ä–∏—è—Ç–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ!' },
            { q: 'Boa viagem de volta!', a: '–°—á–∞—Å—Ç–ª–∏–≤–æ–≥–æ –ø—É—Ç–∏ –¥–æ–º–æ–π!' },
            { q: 'Lamento, mas tenho de sair/me ir embora', a: '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –º–Ω–µ –Ω–∞–¥–æ –∏–¥—Ç–∏' },
            { q: 'Adeus, at√©?/?e?/uma!', a: '–î–æ —Å–≤–∏–¥–∞–Ω–∏—è, –¥–æ –≤—Å—Ç—Ä–µ—á–∏!' },
            { q: 'At√© breve!/amanh√£?!', a: '–î–æ —Å–∫–æ—Ä–æ–≥–æ!/–î–æ –∑–∞–≤—Ç—Ä–∞!' },
            { q: 'Ciao!', a: '–ü–æ–∫–∞!' },
            { q: 'Foi um prazer (?)-lo ((?)-la)/verte conhecido', a: '–†–∞–¥(–∞) –±—ã–ª(–∞) –ø–æ–∑–Ω–∞–∫–æ–º–∏—Ç—å—Å—è' },
            { q: 'Sim/N?o', a: '–î–∞/–ù–µ—Ç' },
            { q: 'Obrigado', a: '–°–ø–∞—Å–∏–±–æ (–º)' },
            { q: 'Obrigada', a: '–°–ø–∞—Å–∏–±–æ (–∂)' },
            { q: 'N?o obrigado', a: '–°–ø–∞—Å–∏–±–æ, –Ω–µ –Ω–∞–¥–æ' },
            { q: 'N?o obrigada', a: '–°–ø–∞—Å–∏–±–æ, –Ω–µ –Ω–∞–¥–æ (–∂)' },
            { q: 'Por favor', a: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞' },
            { q: 'N?o compreete/n√£o entendo', a: '–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é' },
            { q: 'Fala ingl√™s/franc?s/russo?', a: '–í—ã –≥–æ–≤–æ—Ä–∏—Ç–µ –ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏/–ø–æ-—Ñ—Ä–∞–Ω—Ü—É–∑—Å–∫–∏/–ø–æ-—Ä—É—Å—Å–∫–∏?' },
            { q: 'Eu n?o falo portugu√™s', a: '–Ø –Ω–µ –≥–æ–≤–æ—Ä—é –ø–æ-–ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏' },
            { q: '(?)-lhe/(?e um(a) que fala russo/ingl√™s?', a: '–í—ã –∑–Ω–∞–µ—Ç–µ –∫–æ–≥–æ-–Ω–∏–±—É–¥—å, –∫—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –ø–æ-—Ä—É—Å—Å–∫–∏/–ø–æ-–∞–Ω–≥–ª–∏–π—Å–∫–∏?' },
            { q: 'Desculpe', a: '–ò–∑–≤–∏–Ω–∏—Ç–µ' },
            { q: 'Parece!', a: '–Ø –ø–æ–Ω—è–ª' },
            { q: 'N√£o percebeste/isso', a: '–Ø –Ω–µ –ø–æ–Ω—è–ª' },
            { q: 'Por favor, fale mais desvagar', a: '–ì–æ–≤–æ—Ä–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–æ–º–µ–¥–ª–µ–Ω–Ω–µ–µ' },
            { q: 'Podia repetir isso, por favor?', a: '–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞' },
            { q: 'Como se diz isso em portugu√™s?', a: '–ö–∞–∫ —ç—Ç–æ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ-–ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏' },
            { q: 'O que signfica...?', a: '–ß—Ç–æ –∑–Ω–∞—á–∏—Ç ...?' },
            { q: 'N?o se importa de me escrever isso?', a: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ —ç—Ç–æ' },
            { q: 'Como est√°?/Como vai?', a: '–ö–∞–∫ –¥–µ–ª–∞?' },
            { q: 'Se faz favor!/Com licen?a', a: '–ë—É–¥—å—Ç–µ –ª—é–±–µ–∑–Ω—ã' },
            { q: 'Desculpe!', a: '–ò–∑–≤–∏–Ω–∏—Ç–µ!' },
            { q: 'Tenho muita pena!/Sinto muito', a: '–°–æ—á—É–≤—Å—Ç–≤—É—é' },
            { q: 'Pode-me ajudar?', a: '–í—ã –º–æ–∂–µ—Ç–µ –º–Ω–µ –ø–æ–º–æ—á—å?' },
            { q: 'Pode-me dizer ...?', a: '–°–∫–∞–∂–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞ ...' },
            { q: '(?)-me ... ?/Me d√™ ...?', a: '–î–∞–π—Ç–µ –º–Ω–µ ...' },
            { q: 'Queria ... (Gostaria ...', a: '–Ø —Ö–æ—Ç–µ–ª(–∞) ...' },
            { q: '(?r... aqui?', a: '–ó–¥–µ—Å—å –º–æ–∂–Ω–æ ...?' },
            { q: 'Onde ? a casa de banho?', a: '–ì–¥–µ –∑–¥–µ—Å—å —Ç—É–∞–ª–µ—Ç?' },
            { q: 'Onde posso arranjar ...?', a: '–ì–¥–µ —è –º–æ–≥—É –Ω–∞–π—Ç–∏ ...?' },
            { q: 'Que horas s?o?', a: '–ö–æ—Ç–æ—Ä—ã–π —á–∞—Å?' },
            { q: 'Tenho que me ir embora', a: '–ú–Ω–µ –Ω–∞–¥–æ –∏–¥—Ç–∏' },
            { q: 'Sa?de!', a: '–í–∞—à–µ –∑–¥–æ—Ä–æ–≤—å–µ!' },
            { q: 'V?va!/Vai (√≥p3ss.), !)embora!', a: '–£—Ä–∞! –î–∞–≤–∞–π!' },
            { q: 'Onde ? que fica a embaixada da R?ssia?', a: '–ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ—Å–æ–ª—å—Å—Ç–≤–æ –†–æ—Å—Å–∏–∏?' },
            { q: 'Como se chama?/te chamas?', a: '–ö–∞–∫ –í–∞—Å (—Ç–µ–±—è) –∑–æ–≤—É—Ç?' },
            { q: 'Chamo-me...', a: '–ú–µ–Ω—è –∑–æ–≤—É—Ç ...' },
            { q: 'Donde √©?', a: '–û—Ç–∫—É–¥–∞ –í—ã?' },
            { q: 'Eu sou da R?ssia', a: '–Ø –ø—Ä–∏–µ—Ö–∞–ª(–∞) –∏–∑ –†–æ—Å—Å–∏–∏' },
            { q: 'Que idade tem/tens?', a: '–°–∫–æ–ª—å–∫–æ –í–∞–º (—Ç–µ–±–µ) –ª–µ—Ç?' },
            { q: 'Tenho... anos', a: '–ú–Ω–µ ... –ª–µ—Ç' },
            { q: '(?)-?o casado (casada)?', a: '–í—ã (—Ç—ã) –∂–µ–Ω–∞—Ç(—ã) / –∑–∞–º—É–∂–µ–º?' },
            { q: 'Tem/Tens filhos?', a: '–£ –í–∞—Å/—Ç–µ–±—è –µ—Å—Ç—å –¥–µ—Ç–∏?' },
            { q: 'Que faz/O que √© que faz hoje ? noite/amanh√£?', a: '–ß–µ–º –≤—ã –∑–∞–Ω–∏–º–∞–µ—Ç–µ—Å—å —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º/–∑–∞–≤—Ç—Ä–∞?' },
            { q: 'Vamos comer/beber hoje ? noite?', a: '–ú–æ–∂–µ—Ç –±—ã—Ç—å, –ø–æ–π–¥–µ–º –ø–æ–µ–¥–∏–º/–≤—ã–ø—å–µ–º —Å–µ–≥–æ–¥–Ω—è –≤–µ—á–µ—Ä–æ–º?' },
            { q: 'Vamos comid?/?lo (comed?-la)/convida-te', a: '–Ø —Ö–æ—Ç–µ–ª(–∞) –±—ã –ø—Ä–∏–≥–ª–∞—Å–∏—Ç—å –í–∞—Å (—Ç–µ–±—è) –Ω–∞ –æ–±–µ–¥' },
            { q: 'Quer/Queres ir dansar?', a: '–•–æ—Ç–∏—Ç–µ –ø–æ—Ç–∞–Ω—Ü–µ–≤–∞—Ç—å?' },
            { q: 'Quando/Onde nos encontramos?', a: '–ö–æ–≥–¥–∞/–ì–¥–µ –º—ã –≤—Å—Ç—Ä–µ—Ç–∏–º—Å—è?' },
            { q: 'Posso ir ter/buscar com?/contigo?', a: '–Ø –º–æ–≥—É –∑–∞–π—Ç–∏ –∑–∞ –í–∞–º–∏ (—Ç–æ–±–æ–π)?' },
            { q: 'Posso ir buscar-(?o (busc?-la)/buscar-te ?s... horas', a: '–Ø –∑–∞–π–¥—É –∑–∞ –í–∞–º–∏ (—Ç–æ–±–æ–π) –≤ ... —á–∞—Å–æ–≤' },
            { q: '(?)-levou-a/?eve-a)/levo-te ? casa', a: '–Ø –ø—Ä–æ–≤–æ–∂—É –í–∞—Å (—Ç–µ–±—è) –¥–æ–º–æ–π' },
            { q: 'Ainda nos vemos a ver?', a: '–ú—ã –µ—â—ë —É–≤–∏–¥–∏–º—Å—è?' },
            { q: 'Muito gosto', a: '–û—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ' },
            { q: 'Est? bem', a: '–í—Å—ë –≤ –ø–æ—Ä—è–¥–∫–µ' },
            { q: 'Anda c/?/O sei', a: '–•–æ—Ä–æ—à–æ' },
            { q: 'Talvez', a: '–ú–æ–∂–µ—Ç –±—ã—Ç—å' },
            { q: 'Espero, mas n?o posso', a: '–Ø –Ω–∞–¥–µ—é—Å—å, (–Ω–æ) –Ω–µ –º–æ–≥—É' },
            { q: 'Est?/Est?s aqui sozinho?', a: '–í—ã –ø—Ä–∏—à–ª–∏ –æ–¥–∏–Ω(–æ–¥–Ω–∞)?' },
            { q: 'Posso-me sentar ao p?? de si/ti?', a: '–ú–æ–∂–Ω–æ —Å–µ—Å—Ç—å —Ä—è–¥–æ–º —Å –í–∞–º–∏ (—Ç–æ–±–æ–π)?' },
            { q: 'Estou ? espera de uma pessoa', a: '–Ø –∂–¥—É –æ–¥–Ω–æ–≥–æ (–æ–¥–Ω—É) —á–µ–ª–æ–≤–µ–∫–∞' },
            { q: 'Tens um namorado/uma namorada?', a: '–£ —Ç–µ–±—è –µ—Å—Ç—å –¥—Ä—É–≥/–ø–æ–¥—Ä—É–≥–∞?' },
            { q: 'Tu ?s muito bonita', a: '–¢—ã –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–∞—è' },
            { q: 'Tens cabelo/√≥lhos muito bonitos', a: '–£ —Ç–µ–±—è –æ—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤—ã–µ –≤–æ–ª–æ—Å—ã/–≥–ª–∞–∑–∞' },
            { q: 'Agradas-me imenso', a: '–¢—ã –º–Ω–µ –æ—á–µ–Ω—å –Ω—Ä–∞–≤–∏—à—å—Å—è' },
            { q: 'Eu gosto de ti', a: '–¢—ã –º–Ω–µ –Ω—Ä–∞–≤–∏—à—å—Å—è' },
            { q: 'Amo-te', a: '–Ø –ª—é–±–ª—é —Ç–µ–±—è' },
            { q: 'Fico muito contente de estar contigo', a: '–Ø –æ—á–µ–Ω—å —Ä–∞–¥(–∞) –±—ã—Ç—å —Å —Ç–æ–±–æ–π' },
            { q: 'Vens comigo a minha casa?', a: '–ü–æ–π–¥—ë–º –∫–æ –º–Ω–µ –¥–æ–º–æ–π?' },
            { q: 'Deixe-me em paz!', a: '–û—Å—Ç–∞–≤—å—Ç–µ –º–µ–Ω—è –≤ –ø–æ–∫–æ–µ!' },
            { q: 'Desapare?e!', a: '–ò—Å—á–µ–∑–Ω–∏!' },
            { q: 'Muito bem!', a: '–û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ!' },
            { q: 'Estou muito satisfeito (satisfeita)!', a: '–Ø –æ—á–µ–Ω—å –¥–æ–≤–æ–ª–µ–Ω (–¥–æ–≤–æ–ª—å–Ω–∞)!' },
            { q: 'Maravilhoso!', a: '–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ!' },
            { q: 'Com muito gosto', a: '–° —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º' },
            { q: 'Tenho me faz', a: '–ú–Ω–µ –≤—Å—ë —Ä–∞–≤–Ω–æ' },
            { q: 'Que pena!', a: '–ö–∞–∫ –∂–∞–ª—å!' },
            { q: 'Eu gostava mais de...', a: '–Ø –ø—Ä–µ–¥–ø–æ—á—ë–ª(–ª–∞) –±—ã ...' },
            { q: 'Isto n?o me agrada', a: '–ú–Ω–µ —ç—Ç–æ –Ω–µ –Ω—Ä–∞–≤–∏—Ç—Å—è' },
            { q: 'Isto √© muito exorrecido', a: '–≠—Ç–æ –æ—á–µ–Ω—å —Å–∫—É—á–Ω–æ' },
            { q: 'De maneira nenhuma', a: '–ù–∏ –≤ –∫–æ–µ–º —Å–ª—É—á–∞–µ' },
            { q: 'Muito obrigado (obrigada)', a: '–ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ' },
            { q: 'Posso?', a: '–ú–æ–∂–Ω–æ?' },
            { q: 'Por favor...', a: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞' },
            { q: 'Obrigada (Obrigado), com muito gosto', a: '–°–ø–∞—Å–∏–±–æ, —Å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ–º' },
            { q: 'N?o, obrigado (obrigada)', a: '–°–ø–∞—Å–∏–±–æ, –Ω–µ –Ω–∞–¥–æ' },
            { q: 'Com muita pena, mas...', a: '–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –Ω–æ ...' },
            { q: 'Muito obrigado (obrigada), ?-umamh√£/sei da sua parte', a: '–ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ, –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ –ø—Ä–∏–≤–µ—Ç –í–∞—à–∏–º –±–ª–∏–∑–∫–∏–º' },
            { q: 'Muito obrigado (obrigado) pelo or-m?de/pela ajuda', a: '–ë–æ–ª—å—à–æ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ/–ø–æ–º–æ—â—å' },
            { q: 'Com muito prazer', a: '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞ (–Ω–µ –∑–∞ —á—Ç–æ)' },
            { q: 'Desculpe!', a: '–ò–∑–≤–∏–Ω–∏—Ç–µ!' },
            { q: 'N?o tem de qu?!', a: 'He —Å—Ç–æ–∏—Ç –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏!' },
            { q: 'N?o faz mal!', a: '–ù–∏—á–µ–≥–æ —Å—Ç—Ä–∞—à–Ω–æ–≥–æ!' },
            { q: 'Parab?ns!/desejo-lhe/te-desagra/Pa√≠vel', a: '–ü–æ–∑–¥—Ä–∞–≤–ª—è—é!' },
            { q: 'Que tempo bonito/mau que est? hoje!', a: '–ö–∞–∫–∞—è —Å–µ–≥–æ–¥–Ω—è —Ö–æ—Ä–æ—à–∞—è/–ø–ª–æ—Ö–∞—è –ø–æ–≥–æ–¥–∞!' },
            { q: 'Est? muito calor/frio (aqui)', a: '–û—á–µ–Ω—å –∂–∞—Ä–∫–æ (—Ö–æ–ª–æ–¥–Ω–æ) (–∑–¥–µ—Å—å)' },
            { q: 'O qu? diz a previs?o meteorol?gica?', a: '–ö–∞–∫–æ–π –ø—Ä–æ–≥–Ω–æ–∑ –ø–æ–≥–æ–¥—ã?' }
        ];

        // –í–µ—Å—å –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ —Ä–∞–Ω—å—à–µ)
        let gameState = 'menu';
        let currentQuestion = null;
        let options = [];
        let selectedAnswer = null;
        let correctAnswer = null;
        let score = { correct: 0, total: 0 };
        let usedIndices = [];

        function render() {
            const app = document.getElementById('app');
            
            if (gameState === 'menu') {
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-md w-full">
                            <div class="text-center mb-8">
                                <h1 class="text-5xl font-bold text-gray-800 mb-3">Portugu√™s</h1>
                                <p class="text-xl text-gray-600">–ò–∑—É—á–∞–π –ø–æ—Ä—Ç—É–≥–∞–ª—å—Å–∫–∏–π –∏–≥—Ä–∞—è!</p>
                            </div>
                            <div class="mb-6 p-5 bg-gradient-to-r from-green-100 to-blue-100 rounded-xl text-center">
                                <p class="text-green-700 font-bold text-lg mb-2">üìö –°–ª–æ–≤–∞—Ä—å: ${vocabulary.length} —Å–ª–æ–≤</p>
                            </div>
                            <button onclick="startGame()" class="w-full bg-gradient-to-r from-green-500 to-blue-600 text-white py-5 px-6 rounded-2xl font-bold text-2xl hover:from-green-600 hover:to-blue-700 transition-all transform hover:scale-105 shadow-lg">
                                ‚ñ∂ Play
                            </button>
                        </div>
                    </div>
                `;
            } else if (gameState === 'playing') {
                const percentage = score.total === 0 ? 0 : Math.round((score.correct / score.total) * 100);
                const showNext = selectedAnswer !== null;
                
                let optionsHTML = options.map((option, index) => {
                    const isSelected = selectedAnswer === option;
                    const isCorrect = option === correctAnswer;
                    const showResult = selectedAnswer !== null;
                    
                    let buttonClass = 'w-full p-5 rounded-xl font-semibold text-lg transition-all border-2 ';
                    if (showResult) {
                        if (isCorrect) {
                            buttonClass += 'bg-green-500 text-white border-green-600';
                        } else if (isSelected && !isCorrect) {
                            buttonClass += 'bg-red-500 text-white border-red-600';
                        } else {
                            buttonClass += 'bg-gray-200 text-gray-500 border-gray-300';
                        }
                    } else {
                        buttonClass += 'bg-white text-gray-800 border-gray-300 hover:border-blue-500 hover:bg-blue-50';
                    }
                    
                    return `<button onclick="selectAnswer('${option.replace(/'/g, "\\'")}')" ${showResult ? 'disabled' : ''} class="${buttonClass}">${option}</button>`;
                }).join('');
                
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 p-4">
                        <div class="max-w-3xl mx-auto">
                            <div class="bg-white/95 backdrop-blur rounded-2xl shadow-xl p-4 mb-6">
                                <div class="flex items-center justify-between flex-wrap gap-3">
                                    <div class="flex items-center gap-4">
                                        <div class="text-2xl font-bold text-gray-800">${score.correct}/${score.total}</div>
                                        <div class="text-xl font-semibold text-blue-600">${percentage}%</div>
                                        <div class="text-sm text-gray-500">–í–æ–ø—Ä–æ—Å ${usedIndices.length} –∏–∑ ${vocabulary.length}</div>
                                    </div>
                                    <div class="flex gap-2">
                                        ${showNext ? '<button onclick="nextQuestion()" class="px-5 py-2.5 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-xl font-semibold hover:from-blue-600 hover:to-purple-700 transition-all shadow-md">Next ‚Üí</button>' : ''}
                                        <button onclick="finishGame()" class="px-5 py-2.5 bg-yellow-500 text-white rounded-xl font-semibold hover:bg-yellow-600 transition-all shadow-md">Finish</button>
                                        <button onclick="exitGame()" class="px-5 py-2.5 bg-red-500 text-white rounded-xl font-semibold hover:bg-red-600 transition-all shadow-md">‚úï Exit</button>
                                    </div>
                                </div>
                            </div>
                            <div class="bg-white rounded-3xl shadow-2xl p-8">
                                <div class="mb-8 p-8 bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl">
                                    <h2 class="text-4xl font-bold text-gray-800 text-center break-words">${currentQuestion}</h2>
                                </div>
                                <div class="grid grid-cols-1 gap-4 mb-6">
                                    ${optionsHTML}
                                </div>
                                ${selectedAnswer ? `
                                    <div class="text-center">
                                        <div class="p-6 ${selectedAnswer === correctAnswer ? 'bg-green-100 border-green-500' : 'bg-red-100 border-red-500'} rounded-2xl border-2">
                                            <p class="text-4xl font-bold ${selectedAnswer === correctAnswer ? 'text-green-700' : 'text-red-700'}">
                                                ${selectedAnswer === correctAnswer ? 'Yes! ‚úì' : 'No! ‚úó'}
                                            </p>
                                        </div>
                                    </div>
                                ` : ''}
                            </div>
                        </div>
                    </div>
                `;
            } else if (gameState === 'finished') {
                const percentage = score.total === 0 ? 0 : Math.round((score.correct / score.total) * 100);
                let motivation = '';
                if (percentage >= 80) motivation = '<p class="text-3xl text-green-600 font-bold mb-8">–û—Ç–ª–∏—á–Ω–æ! üéâ</p>';
                else if (percentage >= 50) motivation = '<p class="text-3xl text-blue-600 font-bold mb-8">–•–æ—Ä–æ—à–æ! üëç</p>';
                else motivation = '<p class="text-3xl text-orange-600 font-bold mb-8">–ü—Ä–æ–¥–æ–ª–∂–∞–π –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è! üí™</p>';
                
                app.innerHTML = `
                    <div class="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-4">
                        <div class="bg-white rounded-3xl shadow-2xl p-8 max-w-lg w-full">
                            <div class="text-center mb-8">
                                <h1 class="text-5xl font-bold text-gray-800 mb-6">üéâ –ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞!</h1>
                                <div class="mb-8 p-8 bg-gradient-to-r from-purple-100 to-blue-100 rounded-2xl">
                                    <p class="text-7xl font-bold text-gray-800 mb-3">${percentage}%</p>
                                    <p class="text-3xl text-gray-700 font-semibold">${score.correct} –∏–∑ ${score.total}</p>
                                </div>
                                ${motivation}
                            </div>
                            <div class="flex gap-4">
                                <button onclick="startGame()" class="flex-1 bg-gradient-to-r from-green-500 to-blue-600 text-white py-5 px-6 rounded-xl font-bold text-lg hover:from-green-600 hover:to-blue-700 transition-all shadow-lg">
                                    –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞
                                </button>
                                <button onclick="exitGame()" class="flex-1 bg-gray-500 text-white py-5 px-6 rounded-xl font-bold text-lg hover:bg-gray-600 transition-all shadow-lg">
                                    –í –º–µ–Ω—é
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        function startGame() {
            gameState = 'playing';
            score = { correct: 0, total: 0 };
            usedIndices = [];
            generateQuestion();
        }

        function generateQuestion() {
            if (usedIndices.length >= vocabulary.length) {
                finishGame();
                return;
            }

            let randomIndex;
            do {
                randomIndex = Math.floor(Math.random() * vocabulary.length);
            } while (usedIndices.includes(randomIndex));

            const question = vocabulary[randomIndex];
            correctAnswer = question.a;
            currentQuestion = question.q;

            const wrongAnswers = [];
            while (wrongAnswers.length < 3) {
                const randomWrongIndex = Math.floor(Math.random() * vocabulary.length);
                const wrongAns = vocabulary[randomWrongIndex].a;
                if (wrongAns !== correctAnswer && !wrongAnswers.includes(wrongAns)) {
                    wrongAnswers.push(wrongAns);
                }
            }

            options = [...wrongAnswers, correctAnswer].sort(() => Math.random() - 0.5);
            selectedAnswer = null;
            usedIndices.push(randomIndex);
            render();
        }

        function selectAnswer(answer) {
            if (selectedAnswer !== null) return;
            selectedAnswer = answer;
            const isCorrect = answer === correctAnswer;
            score.correct += isCorrect ? 1 : 0;
            score.total += 1;
            render();
        }

        function nextQuestion() {
            generateQuestion();
        }

        function finishGame() {
            gameState = 'finished';
            render();
        }

        function exitGame() {
            gameState = 'menu';
            score = { correct: 0, total: 0 };
            usedIndices = [];
            render();
        }

        render();
    </script>
</body>

</html>



